# 📱 승무원 준비생 앱 - 기능별 사용 가이드

## 📋 목차
1. [앱 시작 및 초기 설정](#1-앱-시작-및-초기-설정)
2. [홈 화면 둘러보기](#2-홈-화면-둘러보기)
3. [모의 면접 기능](#3-모의-면접-기능)
4. [일정 관리 기능](#4-일정-관리-기능)
5. [프로필 관리 기능](#5-프로필-관리-기능)
6. [AWS S3 연동 가이드](#6-aws-s3-연동-가이드)
7. [웹 전용 면접 녹화 시스템](#7-웹-전용-면접-녹화-시스템)

---

## 1. 앱 시작 및 초기 설정

### 🎯 **사용자 이름 입력 프로세스**

#### **Step 1: 앱 실행**
1. Expo Go 또는 웹에서 앱을 실행합니다
2. 첫 화면에서 사용자 이름 입력 화면이 나타납니다

#### **Step 2: 사용자 이름 입력**
1. 텍스트 입력 필드에 이름을 입력합니다
2. "시작하기" 버튼을 탭합니다
3. 이름이 앱 전체에서 사용됩니다 (프로필, 면접 기록 등)

#### **Step 3: 메인 앱 진입**
1. 하단 탭 네비게이션이 있는 메인 화면으로 이동됩니다
2. 4개의 탭: 홈, 모의면접, 일정관리, 프로필

---

## 2. 홈 화면 둘러보기

### 🏠 **홈 화면 기능**

#### **Step 1: 홈 화면 접근**
1. 하단 탭에서 "홈" 탭을 선택합니다
2. 메인 대시보드가 표시됩니다

#### **Step 2: 주요 정보 확인**
1. 최근 면접 기록 요약을 확인할 수 있습니다
2. 다음 예정 일정을 확인할 수 있습니다
3. 빠른 액션 버튼들을 사용할 수 있습니다

---

## 3. 모의 면접 기능

### 🎤 **AI 모의 면접 프로세스**

#### **Step 1: 모의면접 시작**
1. 하단 탭에서 "모의면접" 탭을 선택합니다
2. 면접을 시작할 항공사를 선택합니다
3. "면접 시작" 버튼을 탭합니다

#### **Step 2: 면접 진행**
1. 카메라와 마이크 권한을 허용합니다
2. AI가 제시하는 질문에 답변합니다
3. 실시간으로 표정과 음성이 분석됩니다
4. 면접 진행 시간이 표시됩니다

#### **Step 2-1: 웹 환경에서의 녹화 (추가 기능)**
**🌐 웹 브라우저에서 실행 시 자동으로 활성화되는 추가 기능:**

1. **MediaRecorder 자동 시작**:
   - 면접 시작과 동시에 브라우저의 MediaRecorder가 활성화됩니다
   - 실시간 비디오 미리보기가 화면에 표시됩니다
   - 녹화 상태 표시: "🔴 녹화 중"

2. **실시간 로그 표시**:
   - 화면 하단에 녹화 진행 상황이 실시간으로 표시됩니다
   - 예시 로그:
     ```
     [14:30:15] 카메라 및 마이크 권한 요청 중...
     [14:30:16] 미디어 스트림 획득 완료
     [14:30:16] 녹화 시작됨
     [14:30:17] 녹화 데이터 수집: 1024 bytes
     ```

3. **자동 S3 업로드**:
   - 면접 종료 시 자동으로 AWS S3에 업로드됩니다
   - 업로드 진행 상황이 실시간으로 표시됩니다
   - 파일 크기와 업로드 상태를 확인할 수 있습니다

#### **Step 3: 면접 완료**
1. 모든 질문에 답변하면 면접이 종료됩니다
2. **웹 환경**: 자동으로 녹화된 비디오가 S3에 업로드됩니다
3. 즉시 분석 결과를 확인할 수 있습니다
4. 결과는 자동으로 프로필 탭에 저장됩니다

#### **Step 4: 결과 분석**
1. **총점**: 100점 만점 기준 점수
2. **세부 점수**: 
   - 음성 정확도
   - 표정 분석  
   - 말투 & 속도
   - 답변 퀄리티
3. **개선사항**: 구체적인 피드백
4. **추천 조치사항**: 다음 면접을 위한 준비 가이드
5. **🆕 녹화 파일**: 웹 환경에서는 S3에 업로드된 면접 영상 링크 제공

### ⚠️ **웹 녹화 에러 처리**

#### **카메라/마이크 권한 거부**
1. 브라우저에서 권한 요청 시 "허용" 선택 필요
2. 권한 거부 시 안내 메시지 표시
3. 브라우저 설정에서 권한 수동 허용 가능

#### **MediaRecorder 지원 확인**
1. 최신 Chrome, Firefox, Safari 브라우저 사용 권장
2. 구형 브라우저에서는 React Native 카메라로 자동 전환

#### **S3 업로드 실패**
1. 네트워크 연결 상태 확인
2. Pre-Signed URL 유효성 검증
3. 파일 크기 제한 (최대 100MB) 확인

---

## 4. 일정 관리 기능

### 📅 **일정 관리 프로세스**

#### **Step 1: 일정 화면 접근**
1. 하단 탭에서 "일정관리" 탭을 선택합니다
2. 캘린더 뷰가 표시됩니다

#### **Step 2: 일정 추가**
1. 원하는 날짜를 탭합니다
2. "+" 버튼 또는 일정 추가 버튼을 탭합니다
3. 일정 정보를 입력합니다:
   - 제목
   - 시간
   - 메모
   - 카테고리 (면접, 스터디 등)

#### **Step 3: 일정 관리**
1. **일정 확인**: 캘린더에서 일정을 확인합니다
2. **일정 수정**: 기존 일정을 탭하여 수정합니다
3. **일정 삭제**: 일정을 길게 눌러 삭제합니다

---

## 5. 프로필 관리 기능

### 👤 **프로필 조회 프로세스**

#### **Step 1: 프로필 화면 접근**
1. 하단 탭에서 "프로필" 탭을 선택합니다
2. 사용자 프로필 정보가 표시됩니다

#### **Step 2: 면접 기록 확인**
1. "모의 면접 기록" 섹션에서 과거 면접들을 확인합니다
2. 각 기록을 탭하면 상세 결과를 볼 수 있습니다

#### **Step 3: 상세 면접 리포트 확인**
1. **지원자 정보**: 이름, 지원 항공사, 면접 일자
2. **면접 결과 요약**: 총점, 합격 예측 등급, 면접 시간
3. **전반적인 평가**: AI의 종합 평가
4. **세부 평가 결과**: 영역별 점수와 상세 피드백
5. **개선사항**: 구체적인 개선 포인트
6. **추천 조치사항**: 실행 가능한 액션 아이템

### ✏️ **프로필 편집 프로세스**

#### **Step 1: 프로필 편집 시작**
1. 프로필 화면에서 "✏️ 프로필 편집" 버튼을 탭합니다
2. 프로필 편집 모달이 열립니다

#### **Step 2: 미디어 파일 업로드**
1. **비디오 업로드**:
   - "📹 비디오 업로드" 버튼을 탭합니다
   - 디바이스에서 비디오 파일을 선택합니다
   - 업로드 확인 다이얼로그에서 "업로드"를 선택합니다
   - AWS S3에 업로드되고 완료 메시지가 표시됩니다

2. **사진 업로드**:
   - "📸 사진 업로드" 버튼을 탭합니다
   - 갤러리에서 사진을 선택하거나 편집합니다
   - 업로드 확인 다이얼로그에서 "업로드"를 선택합니다
   - AWS S3에 업로드되고 완료 메시지가 표시됩니다

#### **Step 3: 개인정보 입력**
1. **필수 정보**:
   - 이름 (필수)

2. **선택 정보**:
   - 성별 (드롭다운에서 선택)
   - 나이 (숫자 입력)
   - 키 (cm 단위)
   - 몸무게 (kg 단위)
   - 대학교
   - 학점 (예: 3.8/4.5)
   - 어학점수 (예: TOEIC 900)

#### **Step 4: 프로필 저장**
1. 모든 정보 입력 완료 후 "저장" 버튼을 탭합니다
2. 필수 정보 누락 시 오류 메시지가 표시됩니다
3. 저장 완료 시 확인 메시지가 표시됩니다
4. 프로필 화면으로 돌아가 업데이트된 정보를 확인합니다

#### **Step 5: 업데이트된 프로필 확인**
1. 프로필 헤더에 입력한 이름이 표시됩니다
2. 프로필 미리보기에 성별, 나이, 대학교 정보가 표시됩니다
3. 업로드된 미디어 파일 상태가 표시됩니다:
   - "📹 비디오 업로드됨"
   - "📸 사진 업로드됨"

---

## 6. AWS S3 연동 가이드

### 🔒 **환경변수 설정 프로세스**

#### **Step 1: 환경변수 설정 (개발자용)**
PowerShell에서 다음 명령어 실행:
```powershell
$env:AWS_ACCESS_KEY_ID="YOUR_ACCESS_KEY"
$env:AWS_SECRET_ACCESS_KEY="YOUR_SECRET_KEY"
$env:AWS_REGION="ap-northeast-2"
$env:AWS_S3_BUCKET="your-bucket-name"
```

#### **Step 2: 앱 실행**
```bash
npx expo start
```

#### **Step 3: S3 업로드 프로세스**
1. **파일 선택**: 사용자가 비디오/사진을 선택합니다
2. **업로드 확인**: 확인 다이얼로그가 표시됩니다
3. **S3 업로드**: 파일이 AWS S3에 업로드됩니다
4. **URL 저장**: 업로드된 파일의 공개 URL이 프로필에 저장됩니다
5. **상태 업데이트**: UI에서 업로드 완료 상태를 표시합니다

### ⚠️ **에러 처리 프로세스**

#### **AWS 자격 증명 오류**
1. 환경변수가 설정되지 않은 경우 오류 메시지 표시
2. 사용자에게 설정 가이드 안내

#### **업로드 실패**
1. 네트워크 오류 시 재시도 안내
2. 파일 형식 오류 시 지원 형식 안내
3. 권한 오류 시 AWS 설정 확인 안내

---

## 7. 웹 전용 면접 녹화 시스템

### 🎥 **독립형 면접 녹화 프로세스 (웹 전용)**

> **Note**: 이 기능은 웹 환경에서만 사용 가능하며, `src/components/Interview.tsx` 컴포넌트로 구현됩니다.

#### **Step 1: 면접 녹화 화면 접근**
1. 웹 브라우저에서 앱을 실행합니다
2. Interview 컴포넌트가 렌더링됩니다
3. "🎤 AI 면접 녹화" 제목이 표시됩니다

#### **Step 2: 녹화 시작**
1. "🎥 녹화 시작" 버튼을 클릭합니다
2. 브라우저에서 카메라/마이크 권한을 요청합니다
3. 권한 허용 시 실시간 비디오 미리보기가 시작됩니다
4. 상태가 "RECORDING"으로 변경됩니다

#### **Step 3: 녹화 진행 중**
1. **실시간 미리보기**: 
   - 640px 최대 너비의 비디오 스트림 표시
   - 녹화 중일 때 초록색 테두리로 상태 표시

2. **상태 모니터링**:
   - 상태 표시: "RECORDING" (빨간색)
   - 버튼 텍스트: "⏹️ 녹화 중단"

3. **실시간 로그**:
   ```
   📋 진행 로그 (5)
   [14:30:15] 카메라 및 마이크 권한 요청 중...
   [14:30:16] 미디어 스트림 획득 완료
   [14:30:16] 녹화 시작됨
   [14:30:17] 녹화 데이터 수집: 1024 bytes
   [14:30:18] 녹화 데이터 수집: 2048 bytes
   ```

#### **Step 4: 녹화 중단 및 업로드**
1. "⏹️ 녹화 중단" 버튼을 클릭합니다
2. MediaRecorder가 중단되고 Blob 파일이 생성됩니다
3. 자동으로 S3 업로드 프로세스가 시작됩니다

#### **Step 5: S3 업로드 과정**
1. **상태 변경**: "UPLOADING" (주황색)
2. **버튼 상태**: "⏳ 업로드 중..." (비활성화)
3. **업로드 로그**:
   ```
   [14:30:20] 녹화 완료, 업로드 준비 중...
   [14:30:20] 업로드 시작 - 파일 크기: 2.45MB
   [14:30:23] ✅ S3 업로드 성공!
   ```

#### **Step 6: 완료 상태**
1. **상태 변경**: "DONE" (초록색)
2. **버튼 상태**: "✅ 완료" (비활성화)
3. 성공 메시지가 로그에 표시됩니다

#### **Step 7: 새로운 녹화 시작**
1. "🗑️ 로그 초기화" 버튼으로 로그 정리
2. 페이지 새로고침으로 새로운 녹화 세션 시작

### 🔧 **기술적 구현 세부사항**

#### **파일 구조**
```
src/
├── constants.ts              # Pre-Signed URL 및 녹화 설정
├── hooks/useRecorder.ts      # MediaRecorder 훅
├── components/Interview.tsx  # UI 컴포넌트
└── screens/MockInterview/    # 통합된 모바일/웹 화면
```

#### **사용된 웹 API**
1. **MediaRecorder API**: 비디오/오디오 녹화
2. **getUserMedia API**: 카메라/마이크 스트림 획득
3. **Fetch API**: S3 Pre-Signed URL로 PUT 업로드
4. **Blob API**: 녹화된 데이터 처리

#### **지원 브라우저**
- ✅ Chrome 47+
- ✅ Firefox 25+
- ✅ Safari 14.1+
- ❌ Internet Explorer (지원 안함)

### ⚠️ **에러 시나리오 및 대응**

#### **권한 거부 에러**
```
❌ 오류 발생
NotAllowedError: Permission denied
```
**해결방법**: 브라우저 설정에서 카메라/마이크 권한 허용

#### **MediaRecorder 미지원**
```
❌ 오류 발생
MediaRecorder is not supported
```
**해결방법**: 최신 브라우저로 업데이트

#### **S3 업로드 실패**
```
❌ 업로드 실패: 403 Forbidden
```
**해결방법**: Pre-Signed URL 만료 확인 및 갱신

#### **네트워크 에러**
```
❌ 업로드 실패: Network error
```
**해결방법**: 인터넷 연결 상태 확인

### 📊 **성능 최적화**

#### **녹화 품질 설정**
```javascript
RECORDER_CONFIG = {
  mimeType: 'video/webm;codecs=vp8,opus',
  videoBitsPerSecond: 1000000, // 1Mbps
  audioBitsPerSecond: 128000,  // 128kbps
}
```

#### **메모리 관리**
1. 녹화 완료 시 MediaStream 자동 해제
2. Blob 객체 업로드 후 메모리 정리
3. 컴포넌트 언마운트 시 리소스 해제

---

## 🔮 **향후 추가 예정 기능**

### 📝 **추가 기능 삽입 위치**
- **새로운 화면 기능**: 섹션 8번부터 추가
- **기존 기능 확장**: 해당 섹션 내 Step 추가
- **시스템 기능**: 섹션 7번 웹 녹화 시스템 다음에 추가

### 🎯 **기능 추가 시 고려사항**
1. **프로세스 단위**: 사용자 액션 기준으로 Step 구분
2. **에러 처리**: 각 기능별 예외 상황 대응 방법 포함
3. **의존성**: 다른 기능과의 연관성 명시
4. **권한**: 필요한 시스템 권한 안내
5. **🆕 플랫폼 지원**: 웹/모바일 환경별 기능 차이 명시

---

## 📞 **지원 및 문의**

### 🐛 **버그 리포트**
- GitHub Issues에 버그 리포트 등록
- 재현 단계와 함께 상세 설명 제공

### 💡 **기능 제안**
- 새로운 기능 아이디어는 GitHub Discussions에 등록
- 사용자 시나리오와 함께 제안

---

**최종 업데이트**: 2025.01.29  
**버전**: v1.0.0  
**작성자**: 개발팀 